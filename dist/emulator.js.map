{"version":3,"sources":["../src/emulator.js"],"names":["Emulator","jsonFilePath","jsonData","JSON","parse","readFileSync","name","basename","extname","consoles","exe","normalize","command","content","contentJsonString","stringify","writeFileSync","console","log","game","replace","filePath"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;IAEqBA,Q;AACjB,sBAAYC,YAAZ,EACA;AAAA;;AACI,YAAIC,WAAWC,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAgBJ,YAAhB,CAAX,CAAf;;AAEA,aAAKK,IAAL,GAAY,eAAKC,QAAL,CAAcN,YAAd,EAA4B,eAAKO,OAAL,CAAaP,YAAb,CAA5B,CAAZ;;AAEA,aAAKQ,QAAL,GAAgBP,SAASO,QAAT,IAAqB,EAArC;;AAEA,aAAKC,GAAL,GAAWR,SAASQ,GAAT,GAAe,eAAKC,SAAL,CAAeT,SAASQ,GAAxB,CAAf,GAA8C,EAAzD;AACA,aAAKE,OAAL,GAAeV,SAASU,OAAT,IAAoB,cAAnC;AACH;;;;+CAEsBX,Y,EACvB;AACI,gBAAIC,WAAWC,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAgBJ,YAAhB,CAAX,CAAf;;AAEA,iBAAKQ,QAAL,GAAgBP,SAASO,QAAT,IAAqB,KAAKA,QAA1C;;AAEA,iBAAKC,GAAL,GAAW,eAAKC,SAAL,CAAeT,SAASQ,GAAT,IAAgB,KAAKA,GAApC,CAAX;AACA,iBAAKE,OAAL,GAAeV,SAASU,OAAT,IAAoB,KAAKA,OAAxC;AACH;;;6CAEoBX,Y,EACrB;AACI,gBAAIY,UAAU;AACVH,qBAAK,KAAKA,GADA;AAEVE,yBAAS,KAAKA,OAFJ;AAGVH,0BAAU,KAAKA;AAHL,aAAd;;AAMA,gBAAIK,oBAAoBX,KAAKY,SAAL,CAAeF,OAAf,EAAwB,IAAxB,EAA8B,CAA9B,CAAxB;;AAEA,yBAAGG,aAAH,CAAiBf,YAAjB,EAA+Ba,iBAA/B;;AAEAG,oBAAQC,GAAR,8CAAuD,KAAKZ,IAA5D,YAAuEL,YAAvE;AACH;;;0CAEiBkB,I,EAClB;AACI,mBAAO,KAAKP,OAAL,CACFQ,OADE,CACM,OADN,EACe,MAAM,KAAKV,GAAX,GAAiB,GADhC,EAEFU,OAFE,CAEM,QAFN,EAEgB,MAAMD,KAAKE,QAAX,GAAsB,GAFtC,CAAP;AAGH;;;;;;kBA3CgBrB,Q","file":"emulator.js","sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nexport default class Emulator {\r\n    constructor(jsonFilePath)\r\n    {\r\n        let jsonData = JSON.parse(fs.readFileSync(jsonFilePath));\r\n\r\n        this.name = path.basename(jsonFilePath, path.extname(jsonFilePath));\r\n\r\n        this.consoles = jsonData.consoles || [];\r\n        \r\n        this.exe = jsonData.exe ? path.normalize(jsonData.exe) : '';\r\n        this.command = jsonData.command || '{exe} {game}';\r\n    }\r\n\r\n    updateFromUserJsonFile(jsonFilePath)\r\n    {\r\n        let jsonData = JSON.parse(fs.readFileSync(jsonFilePath));\r\n\r\n        this.consoles = jsonData.consoles || this.consoles;\r\n        \r\n        this.exe = path.normalize(jsonData.exe || this.exe);\r\n        this.command = jsonData.command || this.command;\r\n    }\r\n\r\n    generateUserJsonFile(jsonFilePath)\r\n    {\r\n        var content = {\r\n            exe: this.exe,\r\n            command: this.command,\r\n            consoles: this.consoles\r\n        }\r\n\r\n        var contentJsonString = JSON.stringify(content, null, 4);\r\n\r\n        fs.writeFileSync(jsonFilePath, contentJsonString);\r\n\r\n        console.log(`Generated user config file for emulator ${this.name} at ${jsonFilePath}`);\r\n    }\r\n\r\n    getCommandForGame(game)\r\n    {\r\n        return this.command\r\n            .replace('{exe}', '\"' + this.exe + '\"')\r\n            .replace('{game}', '\"' + game.filePath + '\"');\r\n    }\r\n}"]}