{"version":3,"sources":["../src/shortcut-file.js"],"names":["fs","r","ShortcutFile","filePath","shortcuts","_readFile","data","readFileSync","parse","toJSON","map","s","shortcut","push","build","writeFile"],"mappings":"AAAA;;;;;;;;AAEA;;IAAYA,E;;AACZ;;AACA;;;;AACA;;AACA;;IAAYC,C;;;;;;;;IAESC,Y;AACjB,0BAAYC,QAAZ,EACA;AAAA;;AACI,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKC,SAAL,GAAiB,EAAjB;;AAEA,aAAKC,SAAL;AACH;;;;oCAGD;AACI,gBAAIC,OAAON,GAAGO,YAAH,CAAgB,KAAKJ,QAArB,CAAX;;AAEA,iBAAKC,SAAL,GAAiB,2BAAUI,KAAV,CAAgBF,IAAhB,EAAsBG,MAAtB,EAAjB;;AAEA,iBAAKL,SAAL,GAAiBH,EAAES,GAAF,CAAM,UAACC,CAAD;AAAA,uBAAO,iCAAaA,CAAb,CAAP;AAAA,aAAN,EAA8B,KAAKP,SAAnC,CAAjB;AACH;;;oCAEWQ,Q,EACZ;AACI,gBAAID,IAAI,iCAAaC,QAAb,CAAR;;AAEA,iBAAKR,SAAL,CAAeS,IAAf,CAAoBF,CAApB;AACA,mBAAOA,CAAP;AACH;;;yCAGD;AACI,gBAAIL,OAAO,4BAAWQ,KAAX,CAAiB,KAAKV,SAAtB,CAAX;;AAEAJ,eAAGe,SAAH,CAAa,KAAKZ,QAAlB,EAA4BG,IAA5B;AACH;;;;;;kBA/BgBJ,Y","file":"shortcut-file.js","sourcesContent":["\"use strict\";\r\n\r\nimport * as fs from 'fs';\r\nimport {Parser as VDFParser, Builder as VDFBuilder, Shortcut} from 'node-steam-shortcuts';\r\nimport crc from 'crc';\r\nimport {Uint64BE} from 'int64-buffer';\r\nimport * as r from 'ramda';\r\n\r\nexport default class ShortcutFile {\r\n    constructor(filePath)\r\n    {\r\n        this.filePath = filePath;\r\n        this.shortcuts = {};\r\n\r\n        this._readFile();\r\n    }\r\n\r\n    _readFile()\r\n    {\r\n        let data = fs.readFileSync(this.filePath);\r\n\r\n        this.shortcuts = VDFParser.parse(data).toJSON();\r\n\r\n        this.shortcuts = r.map((s) => new Shortcut(s), this.shortcuts);\r\n    }\r\n\r\n    addShortcut(shortcut)\r\n    {\r\n        let s = new Shortcut(shortcut);\r\n\r\n        this.shortcuts.push(s);\r\n        return s;\r\n    }\r\n\r\n    writeShortcuts()\r\n    {\r\n        var data = VDFBuilder.build(this.shortcuts);\r\n\r\n        fs.writeFile(this.filePath, data);\r\n    }\r\n}"]}