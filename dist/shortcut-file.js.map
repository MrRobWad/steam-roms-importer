{"version":3,"sources":["../src/shortcut-file.js"],"names":["fs","r","defaultShortcutPath","ShortcutFile","filePath","shortcuts","_readFile","data","readFileSync","parse","toJSON","map","s","filter","ShortcutPath","console","log","shortcut","custom","push","build","writeFile"],"mappings":"AAAA;;;;;;;;AAEA;;IAAYA,E;;AACZ;;AACA;;;;AACA;;AACA;;IAAYC,C;;;;;;;;AAEZ,IAAMC,sBAAsB,qBAA5B;;IAEqBC,Y;AACjB,0BAAYC,QAAZ,EACA;AAAA;;AACI,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKC,SAAL,GAAiB,EAAjB;;AAEA,aAAKC,SAAL;AACH;;;;oCAGD;AACI,gBAAIC,OAAOP,GAAGQ,YAAH,CAAgB,KAAKJ,QAArB,CAAX;;AAEA,iBAAKC,SAAL,GAAiB,2BAAUI,KAAV,CAAgBF,IAAhB,EAAsBG,MAAtB,EAAjB;;AAEA,iBAAKL,SAAL,GAAiBJ,EAAEU,GAAF,CACb,UAACC,CAAD;AAAA,uBAAO,iCAAaA,CAAb,CAAP;AAAA,aADa,EAEbX,EAAEY,MAAF,CACI;AAAA,uBAAKD,EAAEE,YAAF,IAAkBZ,mBAAlB,IAAyCU,EAAEE,YAAF,IAAkB,UAAhE;AAAA,aADJ,EAEI,KAAKT,SAFT,CAFa,CAAjB;;AAOAU,oBAAQC,GAAR,CAAY,KAAKX,SAAjB;AACH;;;oCAEWY,Q,EACZ;AACI,gBAAIL,IAAI,iCAAaK,QAAb,CAAR;;AAEAL,cAAEE,YAAF,GAAiBZ,mBAAjB;AACAU,cAAEM,MAAF,GAAW,MAAX;;AAEA,iBAAKb,SAAL,CAAec,IAAf,CAAoBP,CAApB;AACA,mBAAOA,CAAP;AACH;;;yCAGD;AACI,gBAAIL,OAAO,4BAAWa,KAAX,CAAiB,KAAKf,SAAtB,CAAX;;AAEAL,eAAGqB,SAAH,CAAa,KAAKjB,QAAlB,EAA4BG,IAA5B;AACH;;;;;;kBAzCgBJ,Y","file":"shortcut-file.js","sourcesContent":["\"use strict\";\r\n\r\nimport * as fs from 'fs';\r\nimport {Parser as VDFParser, Builder as VDFBuilder, Shortcut} from 'node-steam-shortcuts';\r\nimport crc from 'crc';\r\nimport {Uint64BE} from 'int64-buffer';\r\nimport * as r from 'ramda';\r\n\r\nconst defaultShortcutPath = 'steam-roms-importer';\r\n\r\nexport default class ShortcutFile {\r\n    constructor(filePath)\r\n    {\r\n        this.filePath = filePath;\r\n        this.shortcuts = {};\r\n\r\n        this._readFile();\r\n    }\r\n\r\n    _readFile()\r\n    {\r\n        let data = fs.readFileSync(this.filePath);\r\n\r\n        this.shortcuts = VDFParser.parse(data).toJSON();\r\n\r\n        this.shortcuts = r.map(\r\n            (s) => new Shortcut(s), \r\n            r.filter(\r\n                s => s.ShortcutPath != defaultShortcutPath && s.ShortcutPath != \"totototo\",\r\n                this.shortcuts)\r\n        );\r\n\r\n        console.log(this.shortcuts);\r\n    }\r\n\r\n    addShortcut(shortcut)\r\n    {\r\n        let s = new Shortcut(shortcut);\r\n\r\n        s.ShortcutPath = defaultShortcutPath;\r\n        s.custom = \"toto\";\r\n\r\n        this.shortcuts.push(s);\r\n        return s;\r\n    }\r\n\r\n    writeShortcuts()\r\n    {\r\n        var data = VDFBuilder.build(this.shortcuts);\r\n\r\n        fs.writeFile(this.filePath, data);\r\n    }\r\n}"]}