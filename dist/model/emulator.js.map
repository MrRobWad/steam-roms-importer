{"version":3,"sources":["../../src/model/emulator.js"],"names":["Emulator","jsonFilePath","jsonData","JSON","parse","readFileSync","name","basename","extname","consoles","exe","normalize","command","content","contentJsonString","stringify","writeFileSync","console","log","game","replace","filePath"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;IAEqBA,Q;AACnB,oBAAYC,YAAZ,EAA0B;AAAA;;AACxB,QAAMC,WAAWC,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAgBJ,YAAhB,CAAX,CAAjB;;AAEA,SAAKK,IAAL,GAAY,eAAKC,QAAL,CAAcN,YAAd,EAA4B,eAAKO,OAAL,CAAaP,YAAb,CAA5B,CAAZ;;AAEA,SAAKQ,QAAL,GAAgBP,SAASO,QAAT,IAAqB,EAArC;;AAEA,SAAKC,GAAL,GAAWR,SAASQ,GAAT,GAAe,eAAKC,SAAL,CAAeT,SAASQ,GAAxB,CAAf,GAA8C,EAAzD;AACA,SAAKE,OAAL,GAAeV,SAASU,OAAT,IAAoB,cAAnC;AACD;;;;2CAEsBX,Y,EAAc;AACnC,UAAMC,WAAWC,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAgBJ,YAAhB,CAAX,CAAjB;;AAEA,WAAKQ,QAAL,GAAgBP,SAASO,QAAT,IAAqB,KAAKA,QAA1C;;AAEA,WAAKC,GAAL,GAAW,eAAKC,SAAL,CAAeT,SAASQ,GAAT,IAAgB,KAAKA,GAApC,CAAX;AACA,WAAKE,OAAL,GAAeV,SAASU,OAAT,IAAoB,KAAKA,OAAxC;AACD;;;yCAEoBX,Y,EAAc;AACjC,UAAMY,UAAU;AACdH,aAAK,KAAKA,GADI;AAEdE,iBAAS,KAAKA,OAFA;AAGdH,kBAAU,KAAKA;AAHD,OAAhB;;AAMA,UAAMK,oBAAoBX,KAAKY,SAAL,CAAeF,OAAf,EAAwB,IAAxB,EAA8B,CAA9B,CAA1B;;AAEA,mBAAGG,aAAH,CAAiBf,YAAjB,EAA+Ba,iBAA/B;;AAEAG,cAAQC,GAAR,8CAAuD,KAAKZ,IAA5D,YAAuEL,YAAvE;AACD;;;sCAEiBkB,I,EAAM;AACtB,aAAO,KAAKP,OAAL,CACJQ,OADI,CACI,OADJ,QACiB,KAAKV,GADtB,QAEJU,OAFI,CAEI,QAFJ,QAEkBD,KAAKE,QAFvB,OAAP;AAGD;;;;;;kBAvCkBrB,Q","file":"emulator.js","sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nexport default class Emulator {\r\n  constructor(jsonFilePath) {\r\n    const jsonData = JSON.parse(fs.readFileSync(jsonFilePath));\r\n\r\n    this.name = path.basename(jsonFilePath, path.extname(jsonFilePath));\r\n\r\n    this.consoles = jsonData.consoles || [];\r\n\r\n    this.exe = jsonData.exe ? path.normalize(jsonData.exe) : '';\r\n    this.command = jsonData.command || '{exe} {game}';\r\n  }\r\n\r\n  updateFromUserJsonFile(jsonFilePath) {\r\n    const jsonData = JSON.parse(fs.readFileSync(jsonFilePath));\r\n\r\n    this.consoles = jsonData.consoles || this.consoles;\r\n\r\n    this.exe = path.normalize(jsonData.exe || this.exe);\r\n    this.command = jsonData.command || this.command;\r\n  }\r\n\r\n  generateUserJsonFile(jsonFilePath) {\r\n    const content = {\r\n      exe: this.exe,\r\n      command: this.command,\r\n      consoles: this.consoles,\r\n    };\r\n\r\n    const contentJsonString = JSON.stringify(content, null, 4);\r\n\r\n    fs.writeFileSync(jsonFilePath, contentJsonString);\r\n\r\n    console.log(`Generated user config file for emulator ${this.name} at ${jsonFilePath}`);\r\n  }\r\n\r\n  getCommandForGame(game) {\r\n    return this.command\r\n      .replace('{exe}', `\"${this.exe}\"`)\r\n      .replace('{game}', `\"${game.filePath}\"`);\r\n  }\r\n}\r\n"]}