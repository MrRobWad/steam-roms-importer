{"version":3,"sources":["../../src/model/game.js"],"names":["Game","console","filePath","gameConfig","ext","extname","fileName","basename","name","cleanName","cleanRomName","exportToSteam","grid","enabled","undefined","ignore","shouldGameBeIgnored","result","replace","indexOf","match"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEqBA,I;AACnB,gBAAYC,OAAZ,EAAqBC,QAArB,EAAgD;AAAA,QAAjBC,UAAiB,uEAAJ,EAAI;;AAAA;;AAC9C,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKE,GAAL,GAAW,eAAKC,OAAL,CAAaH,QAAb,CAAX;AACA,SAAKI,QAAL,GAAgB,eAAKC,QAAL,CAAcL,QAAd,CAAhB;AACA,SAAKM,IAAL,GAAY,eAAKD,QAAL,CAAcL,QAAd,EAAwB,KAAKE,GAA7B,CAAZ;AACA,SAAKK,SAAL,GAAiB,KAAKC,YAAL,CAAkB,KAAKF,IAAvB,CAAjB;AACA,SAAKG,aAAL,GAAqB,KAArB;AACA,SAAKC,IAAL,GAAYT,WAAWS,IAAX,IAAmB,EAA/B;AACA,SAAKC,OAAL,GAAe,IAAf;;AAEA,QAAIV,WAAWU,OAAX,KAAuBC,SAAvB,IAAoCX,WAAWU,OAAX,KAAuB,KAA/D,EAAsE,KAAKA,OAAL,GAAe,KAAf;;AAEtE,SAAKE,MAAL,GAAc,CAAC,KAAKF,OAAN,IAAiB,KAAKG,mBAAL,CAAyB,KAAKP,SAA9B,CAA/B;AACD;;;;iCAEYD,I,EAAM;AACjB,UAAIS,SAAST,IAAb;AACAS,eAASA,OAAOC,OAAP,CAAe,YAAf,EAA6B,EAA7B,CAAT;AACAD,eAASA,OAAOC,OAAP,CAAe,aAAf,EAA8B,EAA9B,CAAT;AACAD,eAASA,OAAOC,OAAP,CAAe,IAAf,EAAqB,GAArB,CAAT;AACAD,eAASA,OAAOC,OAAP,CAAe,IAAf,EAAqB,EAArB,CAAT;;AAEA,UAAID,OAAOE,OAAP,CAAe,OAAf,MAA4B,CAAC,CAAjC,EAAoCF,kBAAgBA,OAAOC,OAAP,CAAe,OAAf,EAAwB,EAAxB,CAAhB;;AAEpC,aAAOD,MAAP;AACD;;;wCAEmBT,I,EAAM;AACxB,UAAIA,KAAKY,KAAL,CAAW,eAAX,CAAJ,EAAiC,OAAO,IAAP;;AAEjC,aAAO,KAAP;AACD;;;;;;kBAjCkBpB,I","file":"game.js","sourcesContent":["import path from 'path';\r\n\r\nexport default class Game {\r\n  constructor(console, filePath, gameConfig = {}) {\r\n    this.console = console;\r\n    this.filePath = filePath;\r\n    this.ext = path.extname(filePath);\r\n    this.fileName = path.basename(filePath);\r\n    this.name = path.basename(filePath, this.ext);\r\n    this.cleanName = this.cleanRomName(this.name);\r\n    this.exportToSteam = false;\r\n    this.grid = gameConfig.grid || '';\r\n    this.enabled = true;\r\n\r\n    if (gameConfig.enabled !== undefined && gameConfig.enabled === false) this.enabled = false;\r\n\r\n    this.ignore = !this.enabled || this.shouldGameBeIgnored(this.cleanName);\r\n  }\r\n\r\n  cleanRomName(name) {\r\n    let result = name;\r\n    result = result.replace(/\\([^)]\\)/gi, '');\r\n    result = result.replace(/\\[[^\\]]\\]/gi, '');\r\n    result = result.replace(/ +/, ' ');\r\n    result = result.replace(/ $/, '');\r\n\r\n    if (result.indexOf(', The') !== -1) result = `The ${result.replace(', The', '')}`;\r\n\r\n    return result;\r\n  }\r\n\r\n  shouldGameBeIgnored(name) {\r\n    if (name.match(/CD {0,1}[2-9]/)) return true;\r\n\r\n    return false;\r\n  }\r\n}\r\n"]}