{"version":3,"sources":["../src/console-loader.js"],"names":["loadConsoles","loadEmulators","consoles","Promise","resolve","reject","then","emulators","callback","each","emulator","emulatorName","consoleName","toLowerCase","addEmulator"],"mappings":";;;;;QAcgBA,Y,GAAAA,Y;;AAdhB;;AACA;;;;AAEA;;;;AACA;;;;;;AAEA,IAAIC,gBAAgB,SAAhBA,aAAgB,CAACC,QAAD,EACpB;AACI,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EACnB;AACI,0CAAiB,WAAjB,sBAAwCC,IAAxC,CAA6C,UAACC,SAAD;AAAA,mBAAeH,QAAQ,EAACF,UAAUA,QAAX,EAAqBK,WAAWA,SAAhC,EAAR,CAAf;AAAA,SAA7C;AACH,KAHM,CAAP;AAIH,CAND;;AAQO,SAASP,YAAT,CAAsBQ,QAAtB,EACP;AACI,sCAAiB,UAAjB,yBAA0CF,IAA1C,CAA+CL,aAA/C,EAA8DK,IAA9D,CAAmE,gBACnE;AAAA,YADqEJ,QACrE,QADqEA,QACrE;AAAA,YAD+EK,SAC/E,QAD+EA,SAC/E;;AACI,yBAAEE,IAAF,CAAOF,SAAP,EAAkB,UAACG,QAAD,EAAWC,YAAX,EAClB;AACI,6BAAEF,IAAF,CAAOC,SAASR,QAAhB,EAA0B,UAACU,WAAD,EAC1B;AACIA,8BAAcA,YAAYC,WAAZ,EAAd;;AAEA,oBAAIX,SAASU,WAAT,CAAJ,EACIV,SAASU,WAAT,EAAsBE,WAAtB,CAAkCH,YAAlC,EAAgDD,QAAhD;AACP,aAND;AAOH,SATD;;AAWAF,iBAAS,IAAT,EAAeN,QAAf;AACH,KAdD;AAeH","file":"console-loader.js","sourcesContent":["import {loadConfigObject, getUserConfigDirectory} from './user-config';\r\nimport _ from 'lodash';\r\n\r\nimport GameConsole from './game-console';\r\nimport Emulator from './emulator';\r\n\r\nlet loadEmulators = (consoles) =>\r\n{\r\n    return new Promise((resolve, reject) =>\r\n    {\r\n        loadConfigObject('emulators', Emulator).then((emulators) => resolve({consoles: consoles, emulators: emulators}));\r\n    });\r\n}\r\n\r\nexport function loadConsoles(callback)\r\n{\r\n    loadConfigObject('consoles', GameConsole).then(loadEmulators).then(({consoles, emulators}) =>\r\n    {\r\n        _.each(emulators, (emulator, emulatorName) =>\r\n        {\r\n            _.each(emulator.consoles, (consoleName) =>\r\n            {\r\n                consoleName = consoleName.toLowerCase();\r\n\r\n                if (consoles[consoleName])\r\n                    consoles[consoleName].addEmulator(emulatorName, emulator);\r\n            });\r\n        });\r\n\r\n        callback(null, consoles);\r\n    });\r\n}"]}